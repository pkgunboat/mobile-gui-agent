# Mobile Agent 前端控制界面

这是一个现代化的Web界面，用于控制Mobile Agent执行任务，实时查看执行过程和截图。

## 功能特性

### 🎯 核心功能
- **任务指令输入**: 支持自定义指令和预设指令
- **实时执行监控**: 实时显示任务执行状态和进度
- **截图实时更新**: 自动刷新显示当前设备截图
- **执行日志**: 详细的执行日志记录
- **任务统计**: 动作执行、模型调用等统计信息

### 🎨 界面特性
- **现代化设计**: 使用Tailwind CSS构建的响应式界面
- **实时更新**: 支持流式数据更新，无需手动刷新
- **状态指示**: 清晰的状态指示器和进度显示
- **自动滚动**: 日志自动滚动，支持手动控制
- **连接监控**: 实时监控与后端服务的连接状态

## 快速开始

### 1. 启动服务

```bash
# 方法1: 使用启动脚本（推荐）
python start_frontend.py

# 方法2: 手动启动
# 首先启动后端服务
python server.py

# 然后启动前端服务
python frontend_server.py
```

### 2. 访问界面

打开浏览器访问: http://localhost:50004

### 3. 使用界面

1. **输入任务指令**: 在文本框中输入要执行的任务
2. **选择预设指令**: 点击预设按钮快速选择常用任务
3. **开始执行**: 点击"开始执行"按钮
4. **监控进度**: 实时查看执行状态、日志和截图
5. **停止任务**: 需要时可以点击"停止执行"

## 界面说明

### 左侧控制面板
- **任务指令输入**: 输入要执行的任务描述
- **预设指令**: 快速选择常用任务
- **执行控制**: 开始/停止/清空日志按钮
- **执行状态**: 显示当前状态、执行时间、子任务进度

### 右侧内容区域
- **实时截图**: 显示当前设备截图，支持手动刷新
- **执行日志**: 详细的执行过程日志，支持自动滚动
- **任务统计**: 显示动作执行、模型调用等统计信息

## API接口

### 主要接口

| 接口 | 方法 | 描述 |
|------|------|------|
| `/` | GET | 前端页面 |
| `/ping` | GET | 健康检查 |
| `/execute_task` | POST | 执行任务 |
| `/stop_task` | POST | 停止任务 |
| `/status` | GET | 获取状态 |
| `/screenshot` | GET | 获取截图 |
| `/logs` | GET | 获取日志 |
| `/stats` | GET | 获取统计 |

### 任务执行流程

1. **任务分解**: 将用户指令分解为子任务
2. **子任务执行**: 逐个执行子任务
3. **实时反馈**: 通过流式响应实时更新状态
4. **错误处理**: 支持任务重新规划和错误恢复
5. **完成检查**: 验证任务是否完成

## 预设指令

界面提供了以下预设指令：

- **查看天气**: 打开天气APP，查看北京今日天气，并截图保存
- **设置壁纸**: 打开相册，将最新一张图片设置为壁纸
- **开启省电模式**: 帮我开启省电模式

## 快捷键

- `Ctrl + Enter`: 快速执行任务

## 故障排除

### 常见问题

1. **连接失败**
   - 确保后端服务 (server.py) 正在运行
   - 检查端口50004是否被占用
   - 确认Android设备已连接

2. **截图无法显示**
   - 检查ADB连接状态
   - 确认设备屏幕已解锁
   - 检查截图服务权限

3. **任务执行失败**
   - 查看执行日志了解具体错误
   - 检查设备状态和网络连接
   - 确认API密钥配置正确

### 日志查看

执行日志会显示在界面上，包含：
- 任务分解过程
- 子任务执行状态
- 动作执行结果
- 模型调用信息
- 错误和警告信息

## 技术栈

- **前端**: HTML5, CSS3, JavaScript (ES6+)
- **样式**: Tailwind CSS
- **图标**: Font Awesome
- **后端**: Flask (Python)
- **通信**: HTTP API + Server-Sent Events

## 开发说明

### 文件结构

```
frontend/
├── index.html          # 主页面
├── script.js           # 前端逻辑
└── README.md          # 说明文档

frontend_server.py      # Flask后端服务器
start_frontend.py       # 启动脚本
frontend_requirements.txt # 依赖文件
```

### 自定义开发

1. **修改界面样式**: 编辑 `frontend/index.html` 和 CSS
2. **添加新功能**: 修改 `frontend/script.js`
3. **扩展API**: 在 `frontend_server.py` 中添加新接口
4. **添加预设指令**: 在HTML中添加新的预设按钮

## 许可证

本项目遵循原项目的许可证。 